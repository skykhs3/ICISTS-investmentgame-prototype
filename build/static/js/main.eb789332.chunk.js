(this["webpackJsonpfirebase-tutorial"]=this["webpackJsonpfirebase-tutorial"]||[]).push([[0],{43:function(e,t,n){e.exports=n(73)},48:function(e,t,n){},64:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(28),o=n.n(s);n(48),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(2),u=n(4),l=n(6),c=n(5),m=n(7),h=n(12),p=n(18),f=r.a.createContext(null),d=function(e){return function(t){return r.a.createElement(f.Consumer,null,(function(n){return r.a.createElement(e,Object.assign({},t,{firebase:n}))}))}},b=f,v=n(23),E=n.n(v),g=(n(52),n(54),{apiKey:"AIzaSyD04Vcwcek6_LcZepFgGNXLAs2cq3TP3SU",authDomain:"investment-game-hyeonsu1984.firebaseapp.com",databaseURL:"https://investment-game-hyeonsu1984.firebaseio.com",projectId:"investment-game-hyeonsu1984",storageBucket:"investment-game-hyeonsu1984.appspot.com",messagingSenderId:"137734982819",appId:"1:137734982819:web:07e4a9527e7aa5525e0316",measurementId:"G-3M0BH7W64D"}),y=function e(){var t=this;Object(i.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,n){return t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.auth.signInWithEmailAndPassword(e,n)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users/")},this.company=function(e){return t.db.ref("companies/".concat(e))},E.a.initializeApp(g),this.auth=E.a.auth(),this.db=E.a.database()},O=d((function(e){var t=e.firebase;return r.a.createElement("button",{type:"button",onClick:t.doSignOut},"Sign Out")})),j=r.a.createContext(null),k=n(19),C=(n(27),function(e){var t=function(t){function n(e){var t;return Object(i.a)(this,n),(t=Object(l.a)(this,Object(c.a)(n).call(this,e))).submit=function(e){Object(k.confirmAlert)({title:"Notice",message:"".concat(e),buttons:[{label:"Ok",onClick:function(){}}]})},t.state={},t.action={setValue:function(e){t.setState({value:e})}},t}return Object(m.a)(n,t),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(t){t?e.setState({authUser:t}):e.setState({authUser:null})}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var t={state:this.state,action:this.action};return r.a.createElement(j.Provider,{value:t},r.a.createElement(e,this.props))}}]),n}(r.a.Component);return d(t)}),w=n(20),S=function(e){return function(t){var n=function(n){function a(){return Object(i.a)(this,a),Object(l.a)(this,Object(c.a)(a).apply(this,arguments))}return Object(m.a)(a,n),Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(n){e(n)||t.props.history.push("/signin")}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var n=this;return r.a.createElement(j.Consumer,null,(function(a){var s=a.state,o=a.actions;return e(s.authUser)?r.a.createElement(t,Object.assign({},n.props,{state:s,actions:o})):null}))}}]),a}(r.a.Component);return Object(w.a)(p.e,d)(n)}},x=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={loading:!0},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(j.Consumer,null,(function(e){return e.state.authUser?r.a.createElement(I,null):r.a.createElement(M,null)}))}}]),t}(r.a.Component),I=function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(h.b,{to:"/"},"Landing")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/home"},"Home")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/userlist"},"UserList")),r.a.createElement("li",null,r.a.createElement(O,null)))},M=function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(h.b,{to:"/"},"Landing")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/signin"},"Sign In")))},N=x,U=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return null!=this.props.firebase.auth.currentUser&&this.props.firebase.user(this.props.firebase.auth.currentUser.uid).child("messages").child("front").on("value",(function(t){e.props.firebase.user(e.props.firebase.auth.currentUser.uid).child("messages").transaction((function(e){if(null==e)return console.log("messages null!!!"),e;if(void 0==e.queue)return e;for(;e.front<e.queue.length-1;)e.front++,alert(e.queue[e.front]);return e}))})),r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to ICISTS Investment Game!"),r.a.createElement("p",{style:{color:"red"}},"To sign in, please click on the 'Sign In' link at the top."),r.a.createElement("p",null,"\bthis is explanation of ICISTS Investment Game..."))}}]),t}(r.a.Component),P=S((function(e){return!0}))(U),A=n(11),D=n(9),T={username:"",email:"",passwordOne:"",passwordTwo:"",error:null},R=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).onSubmit=function(e){for(var t=n.state,a=t.username,r=t.email,s=t.passwordOne,o={},i=0;i<8;i++)o=Object(D.a)({},o,Object(A.a)({},i,{amountMoney:0}));n.props.firebase.doCreateUserWithEmailAndPassword(r,s).then((function(e){return n.props.firebase.user(e.user.uid).set({username:a,email:r,asset:1e3,mountInfo:o})})).then((function(){n.setState(Object(D.a)({},T)),n.props.history.push("/home")})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(A.a)({},e.target.name,e.target.value))},n.state=Object(D.a)({},T),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.passwordOne,s=e.passwordTwo,o=e.error,i=a!==s||""===a||""===n||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),r.a.createElement("input",{name:"email",value:n,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"passwordOne",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("input",{name:"passwordTwo",value:s,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),r.a.createElement("button",{disabled:i,type:"submit"},"Sign Up"),o&&r.a.createElement("p",null,o.message))}}]),t}(a.Component),W=S((function(e){return!0}))(R),B=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"SignUp"),r.a.createElement(W,null))},H={email:"",error:null},q=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).onSubmit=function(e){var t=n.state.email;n.props.firebase.doPasswordReset(t).then((function(){n.setState(Object(D.a)({},H))})).then((function(){alert("Check your email.")})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(A.a)({},e.target.name,e.target.value))},n.state=Object(D.a)({},H),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.error,a=""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"email",value:this.state.email,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("button",{disabled:a,type:"submit"},"Reset My Password"),n&&r.a.createElement("p",null,n.message))}}]),t}(a.Component),L=function(){return r.a.createElement("p",null,r.a.createElement(h.b,{style:{color:"red"},to:"/pw-forget"},"Reset Password?"))},z=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Reset Password"),r.a.createElement(G,null))},G=d(q),J={email:"",password:"",error:null},K=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).onSubmit=function(e){var t=n.state,a=t.email,r=t.password;n.props.firebase.doSignInWithEmailAndPassword(a,r).then((function(){n.setState(Object(D.a)({},J)),n.props.history.push("/home")})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(A.a)({},e.target.name,e.target.value))},n.state=Object(D.a)({},J),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.error,s=""===n||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"password",value:n,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("button",{disabled:s,type:"submit"},"Sign In"),a&&r.a.createElement("p",null,a.message))}}]),t}(a.Component),Y=Object(w.a)(p.e,d)(K),F=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"SignIn"),r.a.createElement(Y,null),r.a.createElement(L,null))},V=n(10),$=n.n(V),X=n(14),Z={passwordOne:"",passwordTwo:"",error:null},_=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).onSubmit=function(e){var t=n.state.passwordOne;n.props.firebase.doPasswordUpdate(t).then((function(){n.setState(Object(D.a)({},Z))})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(A.a)({},e.target.name,e.target.value))},n.state=Object(D.a)({},Z),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,n=e.passwordTwo,a=e.error,s=t!==n||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"passwordOne",value:t,onChange:this.onChange,type:"password",placeholder:"New Password"}),r.a.createElement("input",{name:"passwordTwo",value:n,onChange:this.onChange,type:"password",placeholder:"Confirm New Password"}),r.a.createElement("button",{disabled:s,type:"submit"},"Reset My Password"),a&&r.a.createElement("p",null,a.message))}}]),t}(a.Component),Q=d(_),ee=(n(64),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,"\ud604\uc7ac ",this.props.round," \ub77c\uc6b4\ub4dc \uc9c4\ud589 \uc911 "),r.a.createElement("div",null,"\ud604\uc7ac \ud22c\uc790 ",r.a.createElement("span",{style:{color:"red"}},1==this.props.caniinvest?"\uac00\ub2a5\ud569\ub2c8\ub2e4":"\ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4")))}}]),t}(r.a.Component)),te=n(32),ne=n.n(te),ae=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).onClockHandler=function(){var e=Object(X.a)($.a.mark((function e(t){var a,r,s,o,i,u,l,c,m,h;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.output,t.previousOutput,t.moment,r=Number(a),s=n.state,s.hour,s.minute,s.second,o=(r-100*(i=(r-(u=r%100))/100%100)-u)/1e4,n.setState({second:u,minute:i,hour:o}),l=n.state,c=l.limitedhour,m=l.limitedminute,h=l.limitedsecond,0!=3600*c+60*m+h-3600*n.state.hour-60*n.state.minute-n.state.second){e.next=13;break}return e.next=12,n.props.firebase.db.ref("/gamestate/caniinvest").transaction((function(e){return null==e?e:e=!1}));case 12:alert("\ub77c\uc6b4\ub4dc \uc885\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={hour:0,minute:0,second:0,style2:{color:"red"},limitedhour:0,limitedminute:0,limitedsecond:0},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.db.ref("/gamestate/timetoend").on("value",(function(t){var n=t.val();console.log(JSON.stringify(n)),e.setState({limitedhour:n.hour,limitedminute:n.minute,limitedsecond:n.second})}))}},{key:"render",value:function(){var e=this.state,t=e.limitedhour,n=e.limitedminute,a=e.limitedsecond,s=3600*t+60*n+a-3600*this.state.hour-60*this.state.minute-this.state.second;return r.a.createElement("div",null,r.a.createElement("div",{style:{color:"blue"}},"\ud604\uc7ac \uc2dc\uac01\uc740 ",r.a.createElement(ne.a,{format:"HH \uc2dc: mm \ubd84: ss \ucd08",ticking:!0,timezone:"Asia/Seoul"})," \uc785\ub2c8\ub2e4."),this.props.caniinvest?r.a.createElement("div",null,"\ud22c\uc790 \uc885\ub8cc \uc2dc\uac01\uc740 ",t,"\uc2dc ",n,"\ubd84 ",a,"\ucd08 \uc785\ub2c8\ub2e4.",r.a.createElement("br",null),"\uc885\ub8cc\uae4c\uc9c0 ",Math.floor(s/60),"\ubd84 ",s%60,"\ucd08 \ub0a8\uc558\uc2b5\ub2c8\ub2e4."):null,r.a.createElement("div",{style:{display:"none"}},"\ud604\uc7ac \uc2dc\uac01\uc740 ",r.a.createElement(ne.a,{format:"HHmmss",ticking:!0,timezone:"Asia/Seoul",onChange:this.onClockHandler})," \uc785\ub2c8\ub2e4."))}}]),t}(r.a.Component),re=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).handleReset=function(e){n.setState({money:""}),n.props.onwilldoChange(n.props.Conum,0)},n.onChange=function(e){n.setState(Object(A.a)({},e.target.name,e.target.value)),n.props.onwilldoChange(n.props.Conum,e.target.value)},n.investsubmit=function(){Object(k.confirmAlert)({title:"Check",message:"\ud22c\uc790\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",buttons:[{label:"Yes",onClick:function(){return n.setState({answer:!0})}},{label:"No",onClick:function(){return n.setState({answer:!1})}}]})},n.handleInvest=function(){var e=Object(X.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=n.state.money){e.next=5;break}console.log("error"),alert("Please enter numbers only!"),e.next=7;break;case 5:return e.next=7,n.props.firebase.user(n.props.firebase.auth.currentUser.uid).transaction((function(e){if(e){if(console.log(n.state.money,Number.isSafeInteger(Number(n.state.money))),e.asset-Number(n.state.money)<0||!Number.isSafeInteger(Number(n.state.money))||Number(n.state.money)<0)return alert("Invaild"),e;if(window.confirm("\ud22c\uc790\uc561\uc740 ".concat(n.state.money," \uc785\ub2c8\ub2e4. \n\ud22c\uc790 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))return e.mountInfo[n.props.Conum].amountMoney+=Number(n.state.money),e.asset-=Number(n.state.money),n.handleReset(),e}return e}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleWithdraw=function(){var e=Object(X.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=n.state.money){e.next=5;break}console.log("error"),alert("Please enter numbers only!"),e.next=7;break;case 5:return e.next=7,n.props.firebase.user(n.props.firebase.auth.currentUser.uid).transaction((function(e){if(e){if(e.mountInfo[n.props.Conum].amountMoney-Number(n.state.money)<0||!Number.isSafeInteger(Number(n.state.money))||Number(n.state.money)<0)return alert("Invaild"),e;if(window.confirm("\uc2e4\uc9c8 \ud68c\uc218\uc561\uc740 ".concat(Math.floor(Number(n.state.money)*(1-n.props.roundfees))," \uc785\ub2c8\ub2e4.\n\ud68c\uc218 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))return e.mountInfo[n.props.Conum].amountMoney-=Number(n.state.money),console.log(n.props.roundfees),e.asset+=Math.floor(Number(n.state.money)*(1-n.props.roundfees)),n.handleReset(),e}return e}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={money:""},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.company(this.props.Conum).on("value",(function(t){var n=t.val();e.setState({survive:n.survive})}))}},{key:"Reset",value:function(){this.setState({money:""}),this.props.onwilldoChange(this.props.Conum,0)}},{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,this.props.Coname),r.a.createElement("td",null,this.props.amountMoney),r.a.createElement("td",null,r.a.createElement("input",{style:{width:"60px"},name:"money",type:"number",value:this.state.money,onChange:this.onChange,placeholder:"0"})),r.a.createElement("td",null,r.a.createElement("button",{type:"submit",onClick:this.handleInvest,disabled:!this.state.survive||!this.props.caniinvest},"\ud22c\uc790")),r.a.createElement("td",null,r.a.createElement("button",{type:"submit",onClick:this.handleWithdraw,disabled:!this.state.survive||!this.props.caniinvest},"\ucca0\ud68c")),r.a.createElement("td",null,r.a.createElement("button",{type:"submit",onClick:this.handleReset},"Reset")))}}]),t}(r.a.Component),se=(n(70),function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).submit=function(e){Object(k.confirmAlert)({title:"Notice",message:"Round is changed. ".concat(e-1," Round \u279d ").concat(e," Round"),buttons:[{label:"Ok",onClick:function(){}}]})},n.onwilldoChange=function(e,t){var a=n.state.willdo;a[e]=Number(t),n.setState({willdo:a})},n.state={username:"name loading...",asset:0,round:0,willdo:[],roundfees:.05};for(var a=0;a<8;a++)n.state.willdo.push(0);return n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(X.a)($.a.mark((function e(){var t=this;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.props.firebase.user(this.props.firebase.auth.currentUser.uid).on("value",(function(e){var n=e.val();t.setState({username:n.username,asset:n.asset,mountInfo:n.mountInfo})}));case 3:return e.next=5,this.props.firebase.db.ref("gamestate").on("value",(function(e){var n=e.val();t.setState({round:n.round,caniinvest:n.caniinvest,roundfees:n.roundfees[n.round]})}));case 5:return e.next=7,this.props.firebase.db.ref("companies").on("value",(function(e){var n=e.val(),a=Object.keys(n).map((function(e){return Object(D.a)({},n[e])}));t.setState({companies:a})}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=this.state,n=t.username,a=t.asset,s=t.round,o=t.caniinvest,i=0,u=0,l=[],c=0;c<8;c++)void 0!=this.state.companies&&void 0!=this.state.mountInfo&&(i+=this.state.mountInfo[c].amountMoney,u+=this.state.willdo[c],l.push(r.a.createElement(re,{caniinvest:this.state.caniinvest,key:c,Conum:c,Coname:this.state.companies[c].name,amountMoney:this.state.mountInfo[c].amountMoney,firebase:this.props.firebase,onwilldoChange:this.onwilldoChange,roundfees:this.state.roundfees})));return null!=this.props.firebase.auth.currentUser&&this.props.firebase.user(this.props.firebase.auth.currentUser.uid).child("messages").child("front").on("value",(function(t){e.props.firebase.user(e.props.firebase.auth.currentUser.uid).child("messages").transaction((function(e){if(null==e)return console.log("messages null!!!"),e;if(void 0==e.queue)return e;for(;e.front<e.queue.length-1;)e.front++,alert(e.queue[e.front]);return e}))})),r.a.createElement("div",null,r.a.createElement("h1",null,n," \ub2d8\uc758 \uc794\uace0 $",a),r.a.createElement(ee,{round:s,caniinvest:o}),r.a.createElement(ae,{firebase:this.props.firebase,caniinvest:o}),r.a.createElement("p",null,r.a.createElement("table",{border:1},r.a.createElement("tr",null,r.a.createElement("th",null,"\uae30\uc5c5\uba85"),r.a.createElement("th",null,"\ub204\uc801 \ud22c\uc790\uc561"),r.a.createElement("th",null,"\uae08\uc561")),l,r.a.createElement("tr",null,r.a.createElement("td",null,"Total"),r.a.createElement("td",null,i),r.a.createElement("td",null,u)))))}}]),t}(r.a.Component)),oe=S((function(e){return!!e}))(se),ie=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(c.a)(t).call(this,e))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(j.Consumer,null,(function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,e.state.authUser.username,"\ub2d8\uc758 \ub9c8\uc774\ud398\uc774\uc9c0"),r.a.createElement(G,null),r.a.createElement(Q,null))}))}}]),t}(r.a.Component),ue=S((function(e){return!!e}))(ie),le=n(42),ce=n.n(le),me=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).onCheckBoxClick=function(e){return function(t){var a=n.state.eliminated;a[e]=t.target.checked,n.setState({eliminated:a})}},n.onCheckBoxButtonClick=function(){var e=Object(X.a)($.a.mark((function e(t){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,n.props.firebase.db.ref().transaction((function(e){if(null==e)return e;for(var t=0;t<8;t++){if(n.state.eliminated[t])for(var r in e.companies[t].survive=!1,e.users)e.users[r].mountInfo[t].amountMoney=0;a.push(!1)}return e}));case 3:n.setState({eliminated:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onTextBoxClick=function(e){return function(t){var a=n.state.survived;a[e]=t.target.value,n.setState({survived:a})}},n.onClickRewardButton=function(){var e=Object(X.a)($.a.mark((function e(t){var a,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=[],e.next=4,n.props.firebase.db.ref().transaction((function(e){if(null==e)return e;for(var t in e.users){for(var a=0,r=0;r<8;r++)a+=Math.floor(e.users[t].mountInfo[r].amountMoney*n.state.survived[r]/100);var s=a+500,o="\ub9ac\uc6cc\ub4dc\uc640 \uc6d4\uae09 \ud3ec\ud568 ".concat(s," \uc9c0\uae09\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");e.users[t].asset+=s,void 0==e.users[t].messages.queue?e.users[t].messages.queue={0:o}:e.users[t].messages.queue=Object(D.a)({},e.users[t].messages.queue,Object(A.a)({},e.users[t].messages.queue.length,o))}return e}));case 4:for(r=0;r<8;r++)a.push(0);n.setState({survived:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onTimeChange=function(e){n.setState(Object(A.a)({},e.target.name,e.target.value))},n.onClickTimeSetButton=function(){var e=Object(X.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.props.firebase.db.ref("/gamestate/timetoend").transaction((function(e){return console.log(JSON.stringify(e)),null==e||(e.hour=Number(n.state.setHour),e.minute=Number(n.state.setMinute),e.second=Number(n.state.setSecond)),e}));case 3:n.setState({setHour:"",setMinute:"",setSecond:""});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={loading:!1,users:[],companies:[],eliminated:[],survived:[],setHour:"",setMinute:"",setSecond:""};for(var a=0;a<8;a++)n.state.eliminated.push(!1),n.state.checked=!1,n.state.survived.push(0);return n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.users().on("value",function(){var t=Object(X.a)($.a.mark((function t(n){var a,r,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(a=n.val())){t.next=6;break}r=[],e.setState({users:r,loading:!1}),t.next=9;break;case 6:return s=Object.keys(a).map((function(e){return Object(D.a)({},a[e],{uid:e,ranking:1,amountMoney:0})})),t.next=9,e.props.firebase.db.ref("/companies").once("value").then((function(t){for(var n=t.val(),a=e.state.companies,r=0;r<8;r++)a[r]={amountMoney:0,name:n[r].name,ranking:1};for(var o=0;o<s.length;o++)for(var i=0;i<8;i++)s[o].amountMoney+=s[o].mountInfo[i].amountMoney,a[i].amountMoney+=s[o].mountInfo[i].amountMoney;e.setState({users:s,companies:a,loading:!1})}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.onSwitchClick=this.onSwitchClick.bind(this),this.props.firebase.db.ref("/gamestate/caniinvest").on("value",(function(t){e.setState({checked:t.val()})}))}},{key:"componentWillUnmount",value:function(){console.log("AdminPage will unmount"),this.props.firebase.users().off()}},{key:"onSwitchClick",value:function(e){this.setState({checked:e}),this.props.firebase.db.ref("/gamestate").transaction((function(t){return null==t||(1==e&&(t.round++,alert("\ub77c\uc6b4\ub4dc\uac00 \uc2dc\uc791\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")),t.caniinvest=e),t}))}},{key:"render",value:function(){var e=this.state,t=e.users,n=e.loading,a=e.companies,s=[];if(a.length>0)for(var o=0;o<8;o++)s.push(r.a.createElement("div",null,a[o].name," : ",r.a.createElement("input",{type:"textbox",size:3,checked:this.state.eliminated[o],value:this.state.survived[o],onChange:this.onTextBoxClick(o)}),"%"));var i=[];if(a.length>0)for(var u=0;u<8;u++)i.push(r.a.createElement("div",null,a[u].name," : ",r.a.createElement("input",{type:"checkbox",onClick:this.onCheckBoxClick(u),checked:this.state.eliminated[u]})));return r.a.createElement("div",null,r.a.createElement("table",{border:1}),r.a.createElement("h1",null,"Control"),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("div",null,"Can I invest now? ",this.state.checked?"YES":"NO"," "),r.a.createElement(ce.a,{onChange:this.onSwitchClick,checked:this.state.checked}))),r.a.createElement("p",null,r.a.createElement("p",null,"When does this round end? ",r.a.createElement("b",null,"(You must do it before you start the next round)"),r.a.createElement("form",{onSubmit:this.onClickTimeSetButton},r.a.createElement("input",{placeholder:"HH",size:3,value:this.state.setHour,name:"setHour",onChange:this.onTimeChange}),r.a.createElement("input",{placeholder:"MM",size:3,value:this.state.setMinute,name:"setMinute",onChange:this.onTimeChange}),r.a.createElement("input",{placeholder:"SS",size:3,value:this.state.setSecond,name:"setSecond",onChange:this.onTimeChange}),r.a.createElement("button",null,"submit"))),"What percentage of the amount of money the participants invest in a company are compensated?",r.a.createElement("br",null),"+ \uc6d4\uae09\uae4c\uc9c0 \uc790\ub3d9 \uc9c0\uae09",r.a.createElement("form",{onSubmit:this.onClickRewardButton},r.a.createElement("div",null,s),r.a.createElement("button",null,"submit"))),r.a.createElement("p",null,"Which companies will be eliminated?",r.a.createElement("div",null,i),r.a.createElement("button",{onClick:this.onCheckBoxButtonClick},"submit")),r.a.createElement("h1",null,"Company List"),r.a.createElement(he,{companies:a}),r.a.createElement("h1",null,"User List"),n&&r.a.createElement("div",null,"Loading ..."),r.a.createElement(pe,{users:t}))}}]),t}(a.Component),he=function(e){var t=e.companies;if(t.length>0)for(var n=0;n<8;n++){t[n].ranking=1;for(var a=0;a<8;a++)t[n].amountMoney<t[a].amountMoney&&t[n].ranking++}return r.a.createElement("div",null,r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("strong",null,"name: ")," ",e.name,r.a.createElement("strong",null," / ranking: ")," ",e.ranking,r.a.createElement("strong",null," / amount: ")," ",e.amountMoney))}))))},pe=function(e){var t=e.users;if(null==t)return r.a.createElement("div",null,"nothing");if(t.length>0){for(var n=0;n<t.length;n++){t[n].ranking=1;for(var a=0;a<t.length;a++)t[n].asset+t[n].amountMoney<t[a].asset+t[a].amountMoney&&t[n].ranking++}t.sort((function(e,t){return e.ranking<t.ranking?-1:e.ranking>t.ranking?1:0}))}return r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.uid},r.a.createElement("p",null,r.a.createElement("strong",null,"Username:")," ",e.username),r.a.createElement("p",null,r.a.createElement("strong",null,"Total:",r.a.createElement("span",{style:{color:"red"}},e.asset+e.amountMoney))),r.a.createElement("p",null,r.a.createElement("strong",null,"Ranking: ",r.a.createElement("span",{style:{color:"blue"}},e.ranking))),r.a.createElement("p",null,r.a.createElement("strong",null,"E-Mail:")," ",e.email),r.a.createElement("p",null,r.a.createElement("strong",null,"Asset:")," ",e.asset),r.a.createElement("p",null,r.a.createElement("strong",null,"ID:")," ",e.uid),r.a.createElement("p",null,JSON.stringify(e.mountInfo),r.a.createElement("br",null),r.a.createElement("br",null)))})))},fe=S((function(e){return!!e}))(me),de=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={loading:!1,users:[]},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("AdminPage did mount"),this.setState({loading:!0}),this.props.firebase.users().on("value",(function(t){var n=t.val();if(null==n){e.setState({users:[],loading:!1})}else{var a=Object.keys(n).map((function(e){return Object(D.a)({},n[e],{uid:e})}));e.setState({users:a,loading:!1})}}))}},{key:"componentWillUnmount",value:function(){console.log("AdminPage will unmount"),this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.state,t=e.users,n=e.loading;return r.a.createElement("div",null,r.a.createElement("h1",null,"User List"),n&&r.a.createElement("div",null,"Loading ..."),r.a.createElement(be,{users:t}))}}]),t}(a.Component),be=function(e){var t=e.users;return null==t?r.a.createElement("div",null,"nothing"):r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.uid},r.a.createElement("p",null,r.a.createElement("strong",null,"Username~!:")," ",e.username),r.a.createElement("p",null,r.a.createElement("strong",null,"E-Mail:")," ",e.email),r.a.createElement("p",null,r.a.createElement("strong",null," ID:")," ",e.uid))})))},ve=S((function(e){return!!e}))(de),Ee=(n(72),C(function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement("hr",null),r.a.createElement(p.a,{exact:!0,path:"/",component:P}),r.a.createElement(p.a,{path:"/signup",component:B}),r.a.createElement(p.a,{path:"/signin",component:F}),r.a.createElement(p.a,{path:"/pw-forget",component:z}),r.a.createElement(p.a,{path:"/home",component:oe}),r.a.createElement(p.a,{path:"/account",component:ue}),r.a.createElement(p.a,{path:"/admin",component:fe}),r.a.createElement(p.a,{path:"/userlist",component:ve}),r.a.createElement("div",{className:"footerheight"}),r.a.createElement("footer",null,r.a.createElement("div",{className:"copyrightFooter"}," N13-1, KAIST 291 DAEHAK-RO, YUSEONG-GU, DAEJEON, KOREA",r.a.createElement("br",null),"Copyright @ 2020 ICISTS Div. Tech & Design"))))}}]),t}(r.a.Component)));o.a.render(r.a.createElement(b.Provider,{value:new y},r.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.eb789332.chunk.js.map