(this["webpackJsonpfirebase-tutorial"]=this["webpackJsonpfirebase-tutorial"]||[]).push([[0],{42:function(e,t,n){e.exports=n(70)},47:function(e,t,n){},62:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),s=n.n(o);n(47),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(3),u=n(4),l=n(6),c=n(5),m=n(7),h=n(10),p=n(15),d=r.a.createContext(null),f=function(e){return function(t){return r.a.createElement(d.Consumer,null,(function(n){return r.a.createElement(e,Object.assign({},t,{firebase:n}))}))}},b=d,v=n(22),E=n.n(v),g=(n(51),n(53),{apiKey:"AIzaSyD04Vcwcek6_LcZepFgGNXLAs2cq3TP3SU",authDomain:"investment-game-hyeonsu1984.firebaseapp.com",databaseURL:"https://investment-game-hyeonsu1984.firebaseio.com",projectId:"investment-game-hyeonsu1984",storageBucket:"investment-game-hyeonsu1984.appspot.com",messagingSenderId:"137734982819",appId:"1:137734982819:web:07e4a9527e7aa5525e0316",measurementId:"G-3M0BH7W64D"}),O=function e(){var t=this;Object(i.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,n){return t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.auth.signInWithEmailAndPassword(e,n)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users/")},this.company=function(e){return t.db.ref("companies/".concat(e))},E.a.initializeApp(g),this.auth=E.a.auth(),this.db=E.a.database()},y=f((function(e){var t=e.firebase;return r.a.createElement("button",{type:"button",onClick:t.doSignOut},"Sign Out")})),j=r.a.createContext(null),w=n(17),C=(n(26),function(e){var t=function(t){function n(e){var t;return Object(i.a)(this,n),(t=Object(l.a)(this,Object(c.a)(n).call(this,e))).submit=function(e){Object(w.confirmAlert)({title:"Notice",message:"".concat(e),buttons:[{label:"Ok",onClick:function(){}}]})},t.state={},t.action={setValue:function(e){t.setState({value:e})}},t}return Object(m.a)(n,t),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})),this.props.firebase.db.ref("/notices").on("value",(function(e){console.log("withAuth changed");var t=e.val(),n=t.isdisplayed,a=t.contents;1==n&&alert(a)}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var t={state:this.state,action:this.action};return r.a.createElement(j.Provider,{value:t},r.a.createElement(e,this.props))}}]),n}(r.a.Component);return f(t)}),S=n(18),k=function(e){return function(t){var n=function(n){function a(){return Object(i.a)(this,a),Object(l.a)(this,Object(c.a)(a).apply(this,arguments))}return Object(m.a)(a,n),Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(n){e(n)||t.props.history.push("/signin")}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var n=this;return r.a.createElement(j.Consumer,null,(function(a){var o=a.state,s=a.actions;return e(o.authUser)?r.a.createElement(t,Object.assign({},n.props,{state:o,actions:s})):null}))}}]),a}(r.a.Component);return Object(S.a)(p.e,f)(n)}},I=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={loading:!0},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(j.Consumer,null,(function(e){return e.state.authUser?r.a.createElement(P,null):r.a.createElement(U,null)}))}}]),t}(r.a.Component),P=function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(h.b,{to:"/"},"Landing")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/home"},"Home")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/admin"},"UserList")),r.a.createElement("li",null,r.a.createElement(y,null)))},U=function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(h.b,{to:"/"},"Landing")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/signin"},"Sign In")))},A=I,N=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to ICISTS Investment Game!"),r.a.createElement("p",{style:{color:"red"}},"To sign in, please click on the 'Sign In' link at the top."),r.a.createElement("p",null,"\bthis is explanation of ICISTS Investment Game..."))},R=n(11),M=n(9),x={username:"",email:"",passwordOne:"",passwordTwo:"",error:null},D=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).onSubmit=function(e){for(var t=n.state,a=t.username,r=t.email,o=t.passwordOne,s={},i=0;i<8;i++)s=Object(M.a)({},s,Object(R.a)({},i,{amountMoney:0}));n.props.firebase.doCreateUserWithEmailAndPassword(r,o).then((function(e){return n.props.firebase.user(e.user.uid).set({username:a,email:r,asset:1e3,mountInfo:s})})).then((function(){n.setState(Object(M.a)({},x)),n.props.history.push("/home")})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(R.a)({},e.target.name,e.target.value))},n.state=Object(M.a)({},x),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.passwordOne,o=e.passwordTwo,s=e.error,i=a!==o||""===a||""===n||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),r.a.createElement("input",{name:"email",value:n,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"passwordOne",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("input",{name:"passwordTwo",value:o,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),r.a.createElement("button",{disabled:i,type:"submit"},"Sign Up"),s&&r.a.createElement("p",null,s.message))}}]),t}(a.Component),W=k((function(e){return!0}))(D),T=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"SignUp"),r.a.createElement(W,null))},L={email:"",error:null},G=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).onSubmit=function(e){var t=n.state.email;n.props.firebase.doPasswordReset(t).then((function(){n.setState(Object(M.a)({},L))})).then((function(){alert("Check your email.")})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(R.a)({},e.target.name,e.target.value))},n.state=Object(M.a)({},L),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.error,a=""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"email",value:this.state.email,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("button",{disabled:a,type:"submit"},"Reset My Password"),n&&r.a.createElement("p",null,n.message))}}]),t}(a.Component),H=function(){return r.a.createElement("p",null,r.a.createElement(h.b,{style:{color:"red"},to:"/pw-forget"},"Reset Password?"))},B=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Reset Password"),r.a.createElement(J,null))},J=f(G),K={email:"",password:"",error:null},z=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).onSubmit=function(e){var t=n.state,a=t.email,r=t.password;n.props.firebase.doSignInWithEmailAndPassword(a,r).then((function(){n.setState(Object(M.a)({},K)),n.props.history.push("/home")})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(R.a)({},e.target.name,e.target.value))},n.state=Object(M.a)({},K),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.error,o=""===n||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"password",value:n,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("button",{disabled:o,type:"submit"},"Sign In"),a&&r.a.createElement("p",null,a.message))}}]),t}(a.Component),F=Object(S.a)(p.e,f)(z),V=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"SignIn"),r.a.createElement(F,null),r.a.createElement(H,null))},Y=(n(62),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,"\ud604\uc7ac ",this.props.round," \ub77c\uc6b4\ub4dc \uc9c4\ud589 \uc911 "),r.a.createElement("div",null,"\uc9c0\uae08 ",1==this.props.caniinvest?"\ud22c\uc790 \uac00\ub2a5":"\ud22c\uc790 \ubd88\uac00\ub2a5"))}}]),t}(r.a.Component)),$=n(41),q=n.n($),X=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{color:"blue"}},"\ud604\uc7ac \uc2dc\uac01\uc740 ",r.a.createElement(q.a,{format:"HH \uc2dc: mm \ubd84: ss \ucd08",ticking:!0,timezone:"Asia/Seoul"})," \uc785\ub2c8\ub2e4.")}}]),t}(r.a.Component),Z=n(20),_=n.n(Z),Q=n(31),ee=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).handleReset=function(e){n.setState({money:""}),n.props.onwilldoChange(n.props.Conum,0)},n.onChange=function(e){n.setState(Object(R.a)({},e.target.name,e.target.value)),n.props.onwilldoChange(n.props.Conum,e.target.value)},n.investsubmit=function(){Object(w.confirmAlert)({title:"Check",message:"\ud22c\uc790\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",buttons:[{label:"Yes",onClick:function(){return n.setState({answer:!0})}},{label:"No",onClick:function(){return n.setState({answer:!1})}}]})},n.handleInvest=function(){var e=Object(Q.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=n.state.money){e.next=5;break}console.log("error"),alert("Please enter numbers only!"),e.next=7;break;case 5:return e.next=7,n.props.firebase.user(n.props.firebase.auth.currentUser.uid).transaction((function(e){if(e){if(e.asset-Number(n.state.money)<0||Number(n.state.money)<0)return alert("Invaild"),e;if(window.confirm("\ud22c\uc790\uc561\uc740 ".concat(n.state.money," \uc785\ub2c8\ub2e4. \n\ud22c\uc790 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))return e.mountInfo[n.props.Conum].amountMoney+=Number(n.state.money),e.asset-=Number(n.state.money),n.handleReset(),e}return e}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleWithdraw=function(){var e=Object(Q.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=n.state.money){e.next=5;break}console.log("error"),alert("Please enter numbers only!"),e.next=7;break;case 5:return e.next=7,n.props.firebase.user(n.props.firebase.auth.currentUser.uid).transaction((function(e){if(e){if(e.mountInfo[n.props.Conum].amountMoney-Number(n.state.money)<0||Number(n.state.money)<0)return alert("Invaild"),e;if(window.confirm("\uc2e4\uc9c8 \ud68c\uc218\uc561\uc740 ".concat(Math.floor(Number(n.state.money)*(1-n.props.roundfees))," \uc785\ub2c8\ub2e4.\n\ud68c\uc218 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))return e.mountInfo[n.props.Conum].amountMoney-=Number(n.state.money),console.log(n.props.roundfees),e.asset+=Math.floor(Number(n.state.money)*(1-n.props.roundfees)),n.handleReset(),e}return e}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={money:""},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.company(this.props.Conum).on("value",(function(t){var n=t.val();console.log(JSON.stringify(n)+" "+n.survive),e.setState({survive:n.survive})}))}},{key:"Reset",value:function(){this.setState({money:""}),this.props.onwilldoChange(this.props.Conum,0)}},{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,this.props.Coname),r.a.createElement("td",null,this.props.amountMoney),r.a.createElement("td",null,r.a.createElement("input",{name:"money",type:"number",value:this.state.money,onChange:this.onChange,placeholder:"0"})),r.a.createElement("td",null,r.a.createElement("button",{type:"submit",onClick:this.handleInvest,disabled:!this.state.survive||!this.props.caniinvest},"\ud22c\uc790")),r.a.createElement("td",null,r.a.createElement("button",{type:"submit",onClick:this.handleWithdraw,disabled:!this.state.survive||!this.props.caniinvest},"\ucca0\ud68c")),r.a.createElement("td",null,r.a.createElement("button",{type:"submit",onClick:this.handleReset},"\uc785\ub825 \ucd08\uae30\ud654")))}}]),t}(r.a.Component),te=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).submit=function(e){Object(w.confirmAlert)({title:"Notice",message:"Round is changed. ".concat(e-1," Round \u279d ").concat(e," Round"),buttons:[{label:"Ok",onClick:function(){}}]})},n.onwilldoChange=function(e,t){var a=n.state.willdo;a[e]=Number(t),n.setState({willdo:a})},n.state={username:"name loading...",asset:0,round:0,willdo:[],roundfees:.05};for(var a=0;a<8;a++)n.state.willdo.push(0);return n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=t.round;return 0!=this.state.round&&t.round!=this.state.round&&alert("Round is changed. \n".concat(n-1," Round \u279d ").concat(n," Round")),!0}},{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.user(this.props.firebase.auth.currentUser.uid).on("value",(function(t){var n=t.val();e.setState({username:n.username,asset:n.asset,mountInfo:n.mountInfo})})),this.props.firebase.db.ref("gamestate").on("value",(function(t){var n=t.val();e.setState({round:n.round,caniinvest:n.caniinvest,roundfees:n.roundfees[n.round]})})),this.props.firebase.db.ref("companies").on("value",(function(t){var n=t.val(),a=Object.keys(n).map((function(e){return Object(M.a)({},n[e])}));e.setState({companies:a})}))}},{key:"render",value:function(){for(var e=this.state,t=e.username,n=e.asset,a=e.round,o=e.caniinvest,s=0,i=0,u=[],l=0;l<8;l++)void 0!=this.state.companies&&(s+=this.state.mountInfo[l].amountMoney,i+=this.state.willdo[l],u.push(r.a.createElement(ee,{caniinvest:this.state.caniinvest,key:l,Conum:l,Coname:this.state.companies[l].name,amountMoney:this.state.mountInfo[l].amountMoney,firebase:this.props.firebase,onwilldoChange:this.onwilldoChange,roundfees:this.state.roundfees})));return r.a.createElement("div",null,r.a.createElement("h1",null,t," \ub2d8\uc758 \uc794\uace0 $",n),r.a.createElement(Y,{round:a,caniinvest:o}),r.a.createElement(X,null),r.a.createElement("table",{border:1},r.a.createElement("th",null,"\uae30\uc5c5\uba85"),r.a.createElement("th",null,"\ub204\uc801 \ud22c\uc790\uc561"),r.a.createElement("th",null,"\ud22c\uc790 or \ud68c\uc218\ud560 \uae08\uc561"),u,r.a.createElement("tr",null,r.a.createElement("td",null,"Total"),r.a.createElement("td",null,s),r.a.createElement("td",null,i))))}}]),t}(r.a.Component),ne=k((function(e){return!!e}))(te),ae={passwordOne:"",passwordTwo:"",error:null},re=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).onSubmit=function(e){var t=n.state.passwordOne;n.props.firebase.doPasswordUpdate(t).then((function(){n.setState(Object(M.a)({},ae))})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(R.a)({},e.target.name,e.target.value))},n.state=Object(M.a)({},ae),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,n=e.passwordTwo,a=e.error,o=t!==n||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"passwordOne",value:t,onChange:this.onChange,type:"password",placeholder:"New Password"}),r.a.createElement("input",{name:"passwordTwo",value:n,onChange:this.onChange,type:"password",placeholder:"Confirm New Password"}),r.a.createElement("button",{disabled:o,type:"submit"},"Reset My Password"),a&&r.a.createElement("p",null,a.message))}}]),t}(a.Component),oe=f(re),se=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(c.a)(t).call(this,e))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(j.Consumer,null,(function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,e.state.authUser.username,"\ub2d8\uc758 \ub9c8\uc774\ud398\uc774\uc9c0"),r.a.createElement(J,null),r.a.createElement(oe,null))}))}}]),t}(r.a.Component),ie=k((function(e){return!!e}))(se),ue=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={loading:!1,users:[]},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("AdminPage did mount"),this.setState({loading:!0}),this.props.firebase.users().on("value",(function(t){var n=t.val();if(null==n){e.setState({users:[],loading:!1})}else{var a=Object.keys(n).map((function(e){return Object(M.a)({},n[e],{uid:e})}));e.setState({users:a,loading:!1})}}))}},{key:"componentWillUnmount",value:function(){console.log("AdminPage will unmount"),this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.state,t=e.users,n=e.loading;return r.a.createElement("div",null,r.a.createElement("h1",null,"User List"),n&&r.a.createElement("div",null,"Loading ..."),r.a.createElement(le,{users:t}))}}]),t}(a.Component),le=function(e){var t=e.users;return null==t?r.a.createElement("div",null,"nothing"):r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.uid},r.a.createElement("p",null,r.a.createElement("strong",null,"Username:")," ",e.username),r.a.createElement("p",null,r.a.createElement("strong",null,"E-Mail:")," ",e.email),r.a.createElement("p",null,r.a.createElement("strong",null," ID:")," ",e.uid))})))},ce=k((function(e){return!!e}))(ue),me=(n(69),C(function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(A,null),r.a.createElement("hr",null),r.a.createElement(p.a,{exact:!0,path:"/",component:N}),r.a.createElement(p.a,{path:"/signup",component:T}),r.a.createElement(p.a,{path:"/signin",component:V}),r.a.createElement(p.a,{path:"/pw-forget",component:B}),r.a.createElement(p.a,{path:"/home",component:ne}),r.a.createElement(p.a,{path:"/account",component:ie}),r.a.createElement(p.a,{path:"/admin",component:ce}),r.a.createElement("div",{className:"footerheight"}),r.a.createElement("footer",null,r.a.createElement("div",{className:"copyrightFooter"}," N13-1, KAIST 291 DAEHAK-RO, YUSEONG-GU, DAEJEON, KOREA",r.a.createElement("br",null),"Copyright @ 2020 ICISTS Div. Tech & Design"))))}}]),t}(r.a.Component)));s.a.render(r.a.createElement(b.Provider,{value:new O},r.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.5e4bcfab.chunk.js.map